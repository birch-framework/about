<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/markdown/index.md at 2023-08-09

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>birch-common &#x2013; </title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">birch-common
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2023-08-09</span>
          &#xA0;| <span id="projectVersion">Version: 1.3.4</span>
      </div>
      <div class="xright"><a href="./" title="birch-common">birch-common</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Parent Project</h5>
    <ul>
     <li class="none"><a href="../index.html" title="birch-parent">birch-parent</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="expanded"><a href="project-info.html" title="Project Information">Project Information</a>
      <ul>
       <li class="none"><strong>About</strong></li>
       <li class="none"><a href="licenses.html" title="Licenses">Licenses</a></li>
       <li class="none"><a href="summary.html" title="Summary">Summary</a></li>
       <li class="none"><a href="team.html" title="Team">Team</a></li>
       <li class="none"><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
       <li class="none"><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
      </ul></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<p><a class="externalLink" href="https://javadoc.io/doc/org.birchframework/birch-common"><img src="https://javadoc.io/badge2/org.birchframework/birch-common/javadoc.svg" alt="javadoc" /></a></p>
<h1>Birch Common</h1>
<p>Common components of the Birch Framework that accelerate Spring Boot based microservices development</p>
<h1>Usage</h1>
<p>To include birch-common as a dependency to any Maven project or module, add the following as a dependency in its Maven POM file:</p>

<div>
<div>
<pre class="source">   &lt;dependency&gt;
      &lt;groupId&gt;org.birchframework&lt;/groupId&gt;
      &lt;artifactId&gt;birch-common&lt;/artifactId&gt;
      &lt;version&gt;${birch.version}&lt;/version&gt;
   &lt;/dependency&gt;
</pre></div></div>

<h1>Libraries and Utilities</h1><section>
<h2><a name="Java_POJO_Regex_Binding"></a>Java POJO Regex Binding</h2>
<p>The <a class="externalLink" href="https://javadoc.io/doc/org.birchframework/birch-common/latest/org/birchframework/framework/regex/Parser.html">Parser</a> class provides a mechanism for parsing a regular expression producing a POJO as a result of binding Regex capture groups to POJO properties. The following is an example of such binding:</p>

<div>
<div>
<pre class="source">@RegexBinding(&quot;Age:\\s+(\\d+)\\s+\\|\\s+Last Name:\\s+(\\w*)\\s+\\|\\s+First Name:(\\s+)(\\w*)\\s+\\|\\s+Deceased:\\s+(y|n|Y|N|t|f|T|F)\\s+\\|\\s+(.*)&quot;)
@Getter
public class DemographicInfo {

   @CaptureGroup(1)
   private int age;

   @CaptureGroup(2)
   private String lastName;

   @CaptureGroup(5)
   private boolean deceased;

   @CaptureGroup(3)
   private String firstName;

   @CaptureGroup(6)
   private Type type;

   public enum Type {
      ROCK_STAR,
      CHARACTER
   }
}
</pre></div></div>

<p>Given a string that matches the <a class="externalLink" href="https://javadoc.io/doc/org.birchframework/birch-common/latest/org/birchframework/framework/regex/RegexBinding.html">@RegexBinding</a>, the Parser.parse(String) method will produce an instance of DemographicInfo wherein capture groups defined within @RegexBiding are mapped to their respective values in properties annotated with <a class="externalLink" href="https://javadoc.io/doc/org.birchframework/birch-common/latest/org/birchframework/framework/regex/CaptureGroup.html">@CaptureGroup</a>.</p>
<p>The following code demonstrates the usage of the Parser for the above class:</p>

<div>
<div>
<pre class="source">final var parser = Parser.of(DemographicInfo.class);
final var objects = parser.parse(&quot;Age: 27 | Last Name: Stardust  | First Name: Ziggy    | Deceased: Y | ROCK_STAR&quot;);
</pre></div></div>

<p>In the above example, objects is a List&lt;?&gt; containing one instance of DemographicInfo.</p>
<p>Multiple classes can be provided to the Parser.of(Class&lt;?&gt;...) factory method, for which parsing each line of input produces one instance of the first matched Regex binding POJO within the returned list.</p>
<p>A common use case is to parse a file split into lines of text and feed those lines as a stream to the overloaded Parser.parse(Stream&lt;String&gt;) method which returns a stream.  This pattern is very memory efficient as it returns a stream that can then be used to evaluate the values in real-time.  The following is such an example:</p>

<div>
<div>
<pre class="source">final var objects = parser.parse(Files.lines(Paths.get(&quot;path/to/population-demographics.txt&quot;)));
objects.forEach(pojo -&gt; {
   if (pojo instanceof DemographicInfo) {
      final var demographic = (DemographicInfo) pojo;
      // Place logic here to consume the parsed values within the 'demographic' POJO
   }
});
</pre></div></div>
</section><section>
<h2><a name="Rate_Gauge"></a>Rate Gauge</h2>
<p>The class <a class="externalLink" href="https://javadoc.io/doc/org.birchframework/birch-common/latest/org/birchframework/framework/metric/RateGauge.html">RateGauge</a> provides the means to calculate a rate via the Micrometer framework.  A rate is defined as a count in a time period, for example requests/second, message/minute. To create a RateGauge, use its builder as in the following example:</p>

<div>
<div>
<pre class="source">final var rateGauge = RateGauge.builder()
                               .withName(&quot;message-rate&quot;)
                               .withDescription(&quot;Incoming message rate&quot;)
                               .withTags(Tag.of(&quot;inbound-queue&quot;, &quot;in-request-queue&quot;))
                               .withRegistry(meterRegistry)
                               .register();
</pre></div></div>

<p>where meterRegistry is a reference to a Spring Actuator bean.  Then call the <a class="externalLink" href="https://javadoc.io/static/org.birchframework/birch-common/1.1.2/org/birchframework/framework/metric/RateGauge.html#increment()">rateGauge.increment()</a> method in your process to demonstrate one unit of processing. When the APM that consumes Actuator-exported metrics requests a sampling of this metric, this RateGauge instance calculates units per second and returns the value to the APM.  A custom value can be provided by calling builder().withValueFunction(BiFunction&lt;Long, Long, Double&gt;) during initialization, in order to override the default count / second calculation.</p></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2021&#x2013;2023<a href="https://www.birchframework.org">Birch Framework</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>